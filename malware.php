<?php

function simulate(array $entries): array
{
    $result = $entries;

    $pattern = ['T', '-', '-', 'X', '-', '-', '-', 'T'];
    $patternSize = count($pattern);

    for ($i = 0; $i <= count($entries) - $patternSize; $i++) {
        $window = array_slice($entries, $i, $patternSize);

        if ($window[3] === 'X') {
            $leftT = $window[0];
            $rightT = $window[7];

            if ($leftT >= $window[3] || $rightT >= $window[3]) {
                $result[$i + 3] = 0;
            }
        }
    }

    return $result;
}

$records = [1, 2, 0, 5, 0, 2, 4, 3, 3, 3];
echo implode(', ', simulate($records)); // Output: 1, 0, 0, 5, 0, 0, 0, 3, 3, 0
